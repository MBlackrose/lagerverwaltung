
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>{% block title %}IT-Lagerverwaltung{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }
    /* Fix: Links klickbar machen */
    nav a {
      display: block;
      position: relative;
      z-index: 10;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">

  <!-- Navigation (nur wenn eingeloggt) -->
  {% if g.user %}
  <nav class="bg-white border-b border-gray-200 shadow-sm">
    <div class="max-w-7xl mx-auto px-6 py-3">
      <div class="flex justify-between items-center">
        
        <!-- Logo & Navigation Links -->
        <div class="flex items-center gap-8">
          <!-- Logo -->
          <a href="{{ url_for('dashboard') }}" class="flex items-center gap-2">
            <span class="text-xl font-bold text-gray-800">ðŸ“¦ Lager</span>
          </a>
          
          <!-- Navigation -->
          <div class="hidden md:flex items-center gap-2">
            <a href="{{ url_for('dashboard') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Start
            </a>

            <a href="{{ url_for('scanner') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Scanner
            </a>

            <a href="{{ url_for('items_list') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Artikel-Liste
            </a>

            <a href="{{ url_for('items_new') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Artikel anlegen
            </a>

            <a href="{{ url_for('movement_new') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Ausgabe (IN/OUT)
            </a>

            <a href="{{ url_for('movements_list') }}" 
               class="px-4 py-2 transition text-sm font-medium text-gray-700 hover:bg-gray-100 cursor-pointer">
              Historie
            </a>
          </div>
        </div>

        <!-- Search & User -->
        <div class="flex items-center gap-4">
          <!-- Search -->
          <form class="hidden lg:flex gap-2" action="{{ url_for('items_list') }}" method="get">
            <input 
              type="text" 
              name="q" 
              placeholder="Suche Artikel..." 
              value="{{ request.args.get('q', '') }}"
              class="px-3 py-1.5 bg-white border border-gray-300 text-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-[#98032D] focus:border-transparent"
            >
            <button type="submit" class="bg-[#98032D] text-white px-4 py-1.5 hover:bg-[#98032D]/90 transition text-sm font-medium cursor-pointer">
              Suchen
            </button>
          </form>

          <!-- User Info -->
          <div class="flex items-center gap-3">
            <span class="text-sm text-gray-700">ðŸ‘¤ {{ g.user.username }}</span>
            <a href="{{ url_for('logout') }}" class="bg-[#98032D] text-white px-4 py-1.5 hover:bg-[#98032D]/90 transition text-sm font-medium cursor-pointer">
              Logout
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
  {% endif %}

  <!-- Hauptinhalt -->
  <main class="{% if g.user %}max-w-7xl mx-auto px-6 py-6{% endif %}">
    
    <!-- Flash-Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="mb-4 p-4 {% if category == 'error' %}bg-red-50 text-red-700 border border-red-200{% else %}bg-green-50 text-green-700 border border-green-200{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-white text-gray-600 text-center py-4 mt-12 border-t border-gray-200">
    <p class="text-sm">&copy; 2025 IT-Lagerverwaltung Landratsamt LÃ¶rrach</p>
  </footer>

</body>
</html>