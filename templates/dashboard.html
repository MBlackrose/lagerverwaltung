{% extends "layout.html" %}

{% block title %}Dashboard - IT-Lagerverwaltung{% endblock %}

{% block content %}
  <!-- Header -->
  <div class="mb-6">
    <h2 class="text-3xl font-bold text-gray-100 mb-1">Ãœberblick</h2>
    <p class="text-gray-300 text-sm">
      <script>
        const now = new Date();
        const days = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'];
        const months = ['Januar', 'Februar', 'MÃ¤rz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'];
        document.write(`${days[now.getDay()]}, ${now.getDate()}. ${months[now.getMonth()]} ${now.getFullYear()} | ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')} Uhr`);
      </script>
    </p>
  </div>

  <!-- KPI Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
    <!-- Artikel Gesamt -->
    <div class="bg-[#fffff] p-5 border-l-4 border-[#F18B00] shadow-md">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-800 text-xs font-medium uppercase tracking-wide">Artikel Gesamt</p>
          <p class="text-4xl font-bold text-gray-900 mt-2">{{ total_items }}</p>
        </div>
        <span class="text-3xl">ğŸ“¦</span>
      </div>
    </div>

    <!-- Niedrige BestÃ¤nde Kasten -->
    <div class="bg-[#ffffff] p-5 border-l-4 border-[#F18B00] shadow-md">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-800 text-xs font-medium uppercase tracking-wide">Niedrige BestÃ¤nde</p>
          <p class="text-4xl font-bold text-gray-900 mt-2">{{ low_stock_count }}</p>
          <p class="text-xs text-gray-700 mt-1">Artikel unter Mindestbestand</p>
        </div>
        <span class="text-3xl">âš ï¸</span>
      </div>
    </div>

    <!-- Bewegungen aendern kasten  (kannst du spÃ¤ter dynamisch machen oder entfernen) -->
    <div class="bg-[#fffff] p-5 border-l-4 border-[#F18B00] shadow-md">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-800 text-xs font-medium uppercase tracking-wide">Bewegungen Heute</p>
          <p class="text-4xl font-bold text-gray-900 mt-2">â€“</p>
          <p class="text-xs text-gray-700 mt-1">Ein- und AusgÃ¤nge</p>
        </div>
        <span class="text-3xl">ğŸ”„</span>
      </div>
    </div>

    <!--Auslastung Kasten-->
    <div class="bg-[#fffff] p-5 border-l-4 border-[#F18B00] shadow-md">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-800 text-xs font-medium uppercase tracking-wide">Auslastung</p>
          <p class="text-4xl font-bold text-gray-900 mt-2">â€“</p>
          <p class="text-xs text-gray-700 mt-1">Platz im Lager</p>
        </div>
        <span class="text-3xl">ğŸ“Š</span>
      </div>
    </div>
  </div>

  <!-- Main Action Area -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
    <!-- Barcode Scanner Button -->
    <div class="lg:col-span-2">
      <a href="{{ url_for('scanner') }}" 
         class="block w-full bg-[#98032D] hover:opacity-90 transition-all p-12 shadow-md text-center">
        <p class="text-5xl mb-3">ğŸ“±</p>
        <p class="text-2xl font-bold text-white">Barcode-Scanner</p>
        <p class="text-sm text-white/80 mt-2">Artikel scannen oder manuell eingeben</p>
      </a>
    </div>

    <!-- Schnellzugriff -->
    <div class="bg-[#fffff] p-5 shadow-md">
      <h3 class="font-bold text-gray-900 mb-4 text-lg">Schnellzugriff</h3>
      <div class="space-y-2">
        <a href="{{ url_for('items_new') }}" class="flex items-center gap-2 bg-white hover:bg-gray-50 border border-gray-300 p-3 text-gray-900 text-sm transition font-medium">
          <span>â•</span>
          <span>Artikel hinzufÃ¼gen</span>
        </a>
        <a href="{{ url_for('items_list') }}" class="flex items-center gap-2 bg-white hover:bg-gray-50 border border-gray-300 p-3 text-gray-900 text-sm transition font-medium">
          <span>ğŸ“‹</span>
          <span>Alle Artikel</span>
        </a>
        <a href="{{ url_for('movements_list') }}" class="flex items-center gap-2 bg-white hover:bg-gray-50 border border-gray-300 p-3 text-gray-900 text-sm transition font-medium">
          <span>ğŸ“Š</span>
          <span>Bewegungen</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Zwei Spalten: Zuletzt & Niedrige BestÃ¤nde -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Zuletzt hinzugefÃ¼gte Artikel -->
    <div class="bg-[#ffffff] p-5 shadow-md">
      <h3 class="text-lg font-bold text-gray-900 mb-4">Zuletzt hinzugefÃ¼gt</h3>
      {% if recently_added %}
        <ul class="space-y-1 text-sm text-gray-800">
          {% for item in recently_added %}
            <li>{{ item.name }} (SKU: {{ item.sku }}) â€“ Bestand: {{ item.qty }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-600 text-sm">Noch keine Artikel</p>
      {% endif %}
    </div>

    <!-- Niedrige BestÃ¤nde -->
    <div class="bg-[#ffffff] p-5 shadow-md">
      <h3 class="text-lg font-bold text-gray-900 mb-4">Niedrige BestÃ¤nde</h3>
      {% if low_stock %}
        <ul class="space-y-1 text-sm text-gray-800">
          {% for item in low_stock %}
            <li>
              {{ item.name }} â€“ Bestand: {{ item.qty }}, Mindestbestand: {{ item.min_qty }}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-600 text-sm">Alle BestÃ¤nde sind OK</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
